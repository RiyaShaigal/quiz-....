<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quiz App</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #667eea, #764ba2);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }

    .quiz-box {
        background: #fff;
        width: 350px;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }

    h2 {
        margin: 10px 0;
    }

    .option {
        background: #f1f1f1;
        padding: 10px;
        margin: 8px 0;
        border-radius: 5px;
        cursor: pointer;
    }

    .option:hover {
        background: #dcdcdc;
    }

    .selected {
        background: #667eea;
        color: white;
    }

    .btns {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
    }

    button {
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        background: #667eea;
        color: white;
        cursor: pointer;
    }

    button:hover {
        background: #5a67d8;
    }

    .timer {
        color: red;
        font-weight: bold;
    }

    .progress {
        height: 6px;
        background: #ddd;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 10px;
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background: #667eea;
    }

    .result {
        text-align: center;
    }
</style>
</head>

<body>

<div class="quiz-box" id="quizBox">
    <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <p>Time Left: <span class="timer" id="time">10</span>s</p>
    <h2 id="question"></h2>
    <div id="options"></div>

    <div class="btns">
        <button onclick="prevQuestion()">Previous</button>
        <button onclick="nextQuestion()">Next</button>
    </div>
</div>

<script>
const quizData = [
    {
        q: "What does HTML stand for?",
        options: ["Hyper Text Markup Language", "High Text Machine Language", "Hyperlinks Text Mark Language", "None"],
        answer: 0
    },
    {
        q: "Which language is used for styling?",
        options: ["HTML", "Python", "CSS", "Java"],
        answer: 2
    },
    {
        q: "Which keyword is used to declare a variable in JavaScript?",
        options: ["var", "let", "const", "All"],
        answer: 3
    },
    {
        q: "Which property is used to change text color in CSS?",
        options: ["font color", "text color", "color", "bgcolor"],
        answer: 2
    }
];

// Shuffle questions
quizData.sort(() => Math.random() - 0.5);

let index = 0;
let score = 0;
let timer = 10;
let interval;
let selectedAnswers = [];

const questionEl = document.getElementById("question");
const optionsEl = document.getElementById("options");
const timeEl = document.getElementById("time");
const progressBar = document.getElementById("progressBar");

function loadQuestion() {
    clearInterval(interval);
    timer = 10;
    timeEl.textContent = timer;

    const q = quizData[index];
    questionEl.textContent = q.q;
    optionsEl.innerHTML = "";

    q.options.forEach((opt, i) => {
        const div = document.createElement("div");
        div.className = "option";
        div.textContent = opt;

        if (selectedAnswers[index] === i) {
            div.classList.add("selected");
        }

        div.onclick = () => selectOption(i, div);
        optionsEl.appendChild(div);
    });

    updateProgress();
    startTimer();
}

function selectOption(i, div) {
    selectedAnswers[index] = i;
    document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
    div.classList.add("selected");
}

function startTimer() {
    interval = setInterval(() => {
        timer--;
        timeEl.textContent = timer;
        if (timer === 0) {
            nextQuestion();
        }
    }, 1000);
}

function nextQuestion() {
    if (index < quizData.length - 1) {
        index++;
        loadQuestion();
    } else {
        showResult();
    }
}

function prevQuestion() {
    if (index > 0) {
        index--;
        loadQuestion();
    }
}

function updateProgress() {
    progressBar.style.width = ((index + 1) / quizData.length) * 100 + "%";
}

function showResult() {
    clearInterval(interval);
    score = 0;

    quizData.forEach((q, i) => {
        if (selectedAnswers[i] === q.answer) score++;
    });

    const highScore = localStorage.getItem("highScore") || 0;
    if (score > highScore) {
        localStorage.setItem("highScore", score);
    }

    document.getElementById("quizBox").innerHTML = `
        <div class="result">
            <h2>Quiz Finished ....!!!!</h2>
            <p>Your Score: <b>${score} / ${quizData.length}</b></p>
            <p>High Score: <b>${localStorage.getItem("highScore")}</b></p>
            <button onclick="location.reload()">Restart Quiz</button>
        </div>
    `;
}

loadQuestion();
</script>

</body>
</html>